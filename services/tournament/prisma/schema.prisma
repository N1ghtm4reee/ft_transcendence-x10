generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_PATH")
}

model Tournament {
    id         String    @id @default(cuid())
    name       String
    status     String // "upcoming", "ongoing", "done", "cancelled" , "pending" this is the status i used 
    prizePool  Int?
    entryFee   Int?
    difficulty String? // "easy", "medium", "hard"
    startTime  DateTime?
    players    Player[]
    matches    Match[]
    createdBy  String?
    createdAt  DateTime  @default(now())
    winnerId   String?
}

model Player {
    id           String     @id @default(cuid())
    userId       String
    username     String
    rank         String?
    country      String?
    tournamentId String
    Tournament   Tournament @relation(fields: [tournamentId], references: [id])

    @@unique([userId, tournamentId])
}

model Match {
    id           String     @id @default(cuid())
    round        Int
    player1Id    String
    player2Id    String?
    winnerId     String?
    score        String?
    status       String // "upcoming" "pending", "ongoing", "completed", "cancelled"
    tournamentId String
    Tournament   Tournament @relation(fields: [tournamentId], references: [id])
}
